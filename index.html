<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‘«è˜†æ¨‚åœ’å°ç·¨å‚¬ç¨¿ç”¢ç”Ÿå™¨</title>

</head>

<body>
    å§“å<br /><input type="text" id="name"><br />
    æ—¥æœŸ<br /><input type="date" id="startDate"><br />
    ç¯€ç›®åç¨±<br /><input type=" text" id="performance"><br />
    <button id="btn">å‚¬ç¨¿ï¼</button>
    <p id="output"></p>
    <button type="button" id="copy" onclick="copy()">è¤‡è£½</button>


</body>
<script>

    Date.prototype.format = function (fmt) {
        const o = {
            "M+": this.getMonth() + 1,                 //æœˆ
            "d+": this.getDate(),                    //æ—¥ 
            "h+": this.getHours(),                   //å°æ™‚ 
            "m+": this.getMinutes(),                 //åˆ† 
            "s+": this.getSeconds(),                 //ç§’ 
            "q+": Math.floor((this.getMonth() + 3) / 3), //å­£ 
            "S": this.getMilliseconds()             //æ¯«ç§’
        };
        if (/(y+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        }
        for (let k in o) {
            if (new RegExp("(" + k + ")").test(fmt)) {
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    }

    const DateDiff = function (sDate1, sDate2) { // sDate1 å’Œ sDate2 æ˜¯ 2016-06-18 æ ¼å¼
        let aDate, oDate1, oDate2, iDays
        aDate = sDate1.split("/")
        oDate1 = new Date(aDate[1] + '/' + aDate[2] + '/' + aDate[0]) // è½‰æ›ç‚º 06/18/2016 æ ¼å¼
        aDate = sDate2.split("/")
        oDate2 = new Date(aDate[1] + '/' + aDate[2] + '/' + aDate[0])
        iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 / 24) // æŠŠç›¸å·®çš„æ¯«ç§’æ•¸è½‰æ›ç‚ºå¤©æ•¸
        return iDays;
    };

    const CopyTextToClipboard = (id) => {
        let TextRange = document.createRange();
        TextRange.selectNode(document.getElementById(id));
        sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(TextRange);
        document.execCommand("copy");
    }

    const copy = () => {
        return CopyTextToClipboard("output")
    }


    Date.prototype.addDays = function (days) {
        this.setDate(this.getDate() + days);
        return this;
    }

    const getTextBtn = document.getElementById("btn");
    const outputText = document.getElementById("output");
    const authorName = document.getElementById("name");
    const performanceName = document.getElementById("performance");
    const performanceDate = document.getElementById("startDate");
    const today = new Date().format("yyyy-MM-dd");

    getTextBtn.addEventListener('click', button => {
        let startDay = new Date(performanceDate.value);
        let startDayFormat = startDay.format("yyyy-MM-dd");
        let endDay = startDay.addDays(30).format("yyyy-MM-dd");
        let deadline = DateDiff(endDay, today);
        outputText.innerHTML = `${authorName.value}å¤§å¾·æ‚¨å¥½ï¼Œè‘«è˜†æ¨‚åœ’å°ç·¨ä¾†å‚¬ç¨¿å›‰ï½ï½ï½<br>æ‚¨æ–¼ ${performanceDate.value} è§€çœ‹çš„ 
        ã€Š${performanceName.value}ã€‹ è©•è«–ï¼Œ<br>é›¢æˆªç¨¿æ—¥ ${endDay} å°šæœ‰ ${deadline} å¤©ï¼Œç‰¹æ­¤ä¾†è¨Šæé†’ï¼Œ<br>å¤§å®¶éƒ½å¾ˆæœŸå¾…æ‚¨çš„è©•è«–ä¸Šç·šå–”ï½ï½ï¼ï¼<br>è‘«è˜†æ¨‚åœ’å°ç·¨æ„Ÿæ©æ‚¨çš„æ„›è­·èˆ‡åŠªåŠ›ï½ï½ğŸ¥°`
    });

</script>

</html>